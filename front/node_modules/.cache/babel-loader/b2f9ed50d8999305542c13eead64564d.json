{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// 搜尋功能\nexport default {\n  name: \"Nav\",\n\n  data() {\n    return {\n      num: 0,\n      arr: {\n        name: \"\",\n        price: 0,\n        detail: \"\",\n        img_url: \"\"\n      },\n      key: \"\"\n    };\n  },\n\n  watch: {},\n  computed: {\n    buy: function () {\n      return this.num;\n    },\n    adminshow: function () {\n      return localStorage.userid == \"admin\";\n    },\n    isAdmin: function () {\n      if (this.$route.name == 'Admin') return \"disabled\";else return \"\";\n    }\n  },\n  methods: {\n    checkstate() {\n      console.log(\"checkstate\");\n      console.log(\"USER:\", localStorage.userid);\n\n      if (localStorage.userid == \"\") {\n        console.log(\"state= 未登入\");\n        return true;\n      } else {\n        console.log(\"state= 已登入\");\n        return false;\n      }\n    },\n\n    searchKey() {\n      this.$emitter.emit('keyword', this.key);\n      this.key = \"\";\n    },\n\n    backhome() {\n      var elements = document.getElementsByClassName('modal-backdrop');\n      var p = elements[0].parentNode;\n      p.removeAttribute(\"style\");\n      p.removeAttribute(\"class\");\n      p.removeChild(elements[0]);\n    },\n\n    logout() {\n      this.num = 0;\n      localStorage.userid = null;\n      this.$router.push(\"Index\");\n    },\n\n    createProduct() {\n      this.$http.get('http://localhost:8000/new/' + this.arr.name + '/' + this.arr.price + '/' + this.arr.detail + '/' + this.img_url).then(() => this.$emitter.emit('reload', 1)).catch(r => console.log(r));\n      this.arr.name = \"\";\n      this.arr.price = 0;\n      this.arr.detail = \"\";\n      this.img_url = \"\";\n    }\n\n  },\n\n  mounted() {\n    console.log(\"NAV ID=\", localStorage.userid);\n    this.$emitter.on('cartNum', () => {\n      this.num++;\n      console.log(this.num);\n    });\n  }\n\n};","map":{"version":3,"mappings":";AAwHA;AACA,eAAe;EACbA,IAAI,EAAE,KADO;;EAEbC,IAAI,GAAG;IACL,OAAO;MACLC,GAAG,EAAC,CADC;MAELC,GAAG,EAAC;QACFH,IAAI,EAAE,EADJ;QAEFI,KAAK,EAAC,CAFJ;QAGFC,MAAM,EAAE,EAHN;QAIFC,OAAO,EAAC;MAJN,CAFC;MAQLC,GAAG,EAAE;IARA,CAAP;EAUD,CAbY;;EAcbC,KAAK,EAAC,EAdO;EAgBbC,QAAQ,EAAE;IACRC,GAAG,EAAE,YAAY;MACf,OAAO,KAAKR,GAAZ;IACD,CAHO;IAIRS,SAAS,EAAE,YAAU;MACnB,OAAOC,YAAY,CAACC,MAAb,IAAqB,OAA5B;IACD,CANO;IAORC,OAAO,EAAE,YAAY;MACnB,IAAG,KAAKC,MAAL,CAAYf,IAAZ,IAAoB,OAAvB,EAAgC,OAAO,UAAP,CAAhC,KACK,OAAO,EAAP;IACN;EAVO,CAhBG;EA4BbgB,OAAO,EAAE;IACPC,UAAU,GAAE;MACVC,OAAO,CAACC,GAAR,CAAY,YAAZ;MACAD,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBP,YAAY,CAACC,MAAjC;;MACA,IAAGD,YAAY,CAACC,MAAb,IAAuB,EAA1B,EAA6B;QAC3BK,OAAO,CAACC,GAAR,CAAY,YAAZ;QACA,OAAO,IAAP;MACF,CAHA,MAII;QACFD,OAAO,CAACC,GAAR,CAAY,YAAZ;QACA,OAAO,KAAP;MACF;IACD,CAZM;;IAaPC,SAAS,GAAE;MACT,KAAKC,QAAL,CAAcC,IAAd,CAAmB,SAAnB,EAA6B,KAAKf,GAAlC;MACA,KAAKA,GAAL,GAAU,EAAV;IACD,CAhBM;;IAiBPgB,QAAQ,GAAE;MACR,IAAIC,QAAO,GAAIC,QAAQ,CAACC,sBAAT,CAAgC,gBAAhC,CAAf;MACA,IAAIC,IAAIH,QAAQ,CAAC,CAAD,CAAR,CAAYI,UAApB;MACAD,CAAC,CAACE,eAAF,CAAkB,OAAlB;MACAF,CAAC,CAACE,eAAF,CAAkB,OAAlB;MACAF,CAAC,CAACG,WAAF,CAAcN,QAAQ,CAAC,CAAD,CAAtB;IACD,CAvBM;;IAwBPO,MAAM,GAAE;MACN,KAAK7B,GAAL,GAAS,CAAT;MACAU,YAAY,CAACC,MAAb,GAAoB,IAApB;MACA,KAAKmB,OAAL,CAAaC,IAAb,CAAkB,OAAlB;IACD,CA5BM;;IA6BPC,aAAa,GAAE;MACb,KAAKC,KAAL,CAAWC,GAAX,CAAe,+BAA+B,KAAKjC,GAAL,CAASH,IAAxC,GAA+C,GAA/C,GAAqD,KAAKG,GAAL,CAASC,KAA9D,GAAuE,GAAvE,GAA6E,KAAKD,GAAL,CAASE,MAAtF,GAA+F,GAA/F,GAAqG,KAAKC,OAAzH,EACC+B,IADD,CACO,MAAM,KAAKhB,QAAL,CAAcC,IAAd,CAAmB,QAAnB,EAA4B,CAA5B,CADb,EAECgB,KAFD,CAEQC,KAAKrB,OAAO,CAACC,GAAR,CAAYoB,CAAZ,CAFb;MAIA,KAAKpC,GAAL,CAASH,IAAT,GAAe,EAAf;MACA,KAAKG,GAAL,CAASC,KAAT,GAAgB,CAAhB;MACA,KAAKD,GAAL,CAASE,MAAT,GAAiB,EAAjB;MACA,KAAKC,OAAL,GAAa,EAAb;IACF;;EAtCO,CA5BI;;EAoEbkC,OAAO,GAAE;IACPtB,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAsBP,YAAY,CAACC,MAAnC;IACA,KAAKQ,QAAL,CAAcoB,EAAd,CAAiB,SAAjB,EAA2B,MAAI;MAC7B,KAAKvC,GAAL;MACAgB,OAAO,CAACC,GAAR,CAAY,KAAKjB,GAAjB;IACD,CAHD;EAID;;AA1EY,CAAf","names":["name","data","num","arr","price","detail","img_url","key","watch","computed","buy","adminshow","localStorage","userid","isAdmin","$route","methods","checkstate","console","log","searchKey","$emitter","emit","backhome","elements","document","getElementsByClassName","p","parentNode","removeAttribute","removeChild","logout","$router","push","createProduct","$http","get","then","catch","r","mounted","on"],"sourceRoot":"","sources":["/Users/chengyu/Downloads/dbhw-main/front/src/components/Navbar.vue"],"sourcesContent":["<template>\n  <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n    <div class=\"container-fluid\">\n      <a class=\"navbar-brand \">FCU Shop</a>\n\n      <button\n        class=\"navbar-toggler\"\n        type=\"button\"\n        data-bs-toggle=\"collapse\"\n        data-bs-target=\"#navbarSupportedContent\"\n        aria-controls=\"navbarSupportedContent\"\n        aria-expanded=\"false\"\n        aria-label=\"Toggle navigation\"\n      >\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n\n\n      <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\" v-if= checkstate()>\n        <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n          <li class=\"nav-item\">\n            <router-link to=\"/\" class=\"nav-link active\" aria-current=\"page\" :class=\"isAdmin\">首頁</router-link>\n          </li>\n        </ul>\n        <ul class=\"navbar-nav mb-2 mb-lg-0 d-flex not-login\" >\n          <li class=\"nav-item\" >\n            <router-link to=\"/login\" class=\"nav-link\" >登入</router-link>\n          </li>\n          <li class=\"nav-item\">\n            <router-link to=\"/signup\" class=\"nav-link\">註冊</router-link>\n          </li>\n          <li class=\"nav-item\">\n            <router-link to=\"/cart\" class=\"nav-link\">購物車({{num}})</router-link>\n          </li>\n        </ul>\n      </div>\n      <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\" v-else>\n        <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n          <li class=\"nav-item\">\n            <router-link to=\"/\" class=\"nav-link active\" aria-current=\"page\" :class=\"isAdmin\">首頁</router-link>\n          </li>\n        </ul>\n        <ul class=\"navbar-nav mb-2 mb-lg-0 d-flex not-login\" >\n          <li class=\"nav-item\">\n            <router-link to=\"/cart\" class=\"nav-link\">購物車({{num}})</router-link>\n          </li>\n          <li class=\"nav-item\">\n            <a @click=\"logout()\" class=\"nav-link\" href=\"\">登出</a>\n          </li>\n        </ul>\n      </div>\n\n\n      <button class=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\" data-toggle=\"modal\" data-target=\"#searchBotton\">Search</button>\n      <button class=\"btn btn-outline-warning my-2 my-sm-0\" type=\"submit\" data-toggle=\"modal\" data-target=\"#createBotton\"  v-if=\"adminshow\">Create</button>\n    </div>\n  </nav>\n\n<!-- Modal -->\n<div class=\"modal fade windowset1\" id=\"searchBotton\" tabindex=\"-1\" role=\"dialog\">\n  <div class=\"modal-dialog windowset\" role=\"document\">\n    <div class=\"modal-content windowset2\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\">FCU SHOP</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n          <input type=\"text\" class=\"form-control\" placeholder=\"商品名稱\" id=\"productKeyword\" v-model=\"key\" >\n      </div>\n      <div class=\"modal-footer\">\n        <button @click=\"searchKey()\" class=\"btn btn-outline-secondary\" type=\"button\" id=\"searchProduct\" data-dismiss=\"modal\">Search</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal fade\" id=\"createBotton\" tabindex=\"-1\" role=\"dialog\">\n  <div class=\"modal-dialog modal-dialog-centered\">\n    <div class=\"modal-content\">\n      <form @submit.prevent>\n        <div class=\"modal-body\">\n            <div class=\"form-group\">\n              <label>商品名稱</label>\n              <input class=\"form-control\" name=\"newName\" v-model=\"arr.name\">\n            </div>\n            \n            <div class=\"form-row\">\n              <div class=\"form-col\">\n                <label for=\"exampleInputPassword1\">商品圖片</label>\n              </div>\n              <div class=\"form-col\">\n                <div class=\"input-group-prepend\">\n                  <div class=\"input-group-text\">https://</div>\n                </div>\n                <input class=\"form-control\" name=\"imageUrl\" v-model=\"arr.img_url\">\n              </div>\n            </div>\n            \n            <div class=\"form-group\">\n              <label for=\"exampleInputPassword1\">商品價錢</label>\n              <input class=\"form-control\" name=\"price\" v-model=\"arr.price\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"exampleInputPassword1\">商品細節</label>\n              <textarea name=\"detail\" rows=\"5\" class=\"form-control\" v-model=\"arr.detail\"></textarea>\n            </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button @click=\"createProduct()\" type=\"submit\" class=\"btn btn-primary\" data-dismiss=\"modal\">新增</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n</template>\n\n<script>\n// 搜尋功能\nexport default {\n  name: \"Nav\",\n  data() {\n    return {\n      num:0,\n      arr:{\n        name: \"\",\n        price:0,\n        detail: \"\",\n        img_url:\"\"\n      },\n      key: \"\",\n    }\n  },\n  watch:{\n  },\n  computed: {\n    buy: function () {\n      return this.num\n    },\n    adminshow: function(){\n      return localStorage.userid==\"admin\"\n    },\n    isAdmin: function () {\n      if(this.$route.name == 'Admin') return \"disabled\"\n      else return \"\"\n    },\n  },\n  methods: {\n    checkstate(){\n      console.log(\"checkstate\")\n      console.log(\"USER:\",localStorage.userid)\n      if(localStorage.userid == \"\"){\n        console.log(\"state= 未登入\")\n        return true\n      }\n      else{\n        console.log(\"state= 已登入\")\n        return false\n      }\n    },\n    searchKey(){\n      this.$emitter.emit('keyword',this.key)\n      this.key= \"\"\n    },\n    backhome(){\n      var elements = document.getElementsByClassName('modal-backdrop');\n      var p = elements[0].parentNode\n      p.removeAttribute(\"style\")\n      p.removeAttribute(\"class\")\n      p.removeChild(elements[0])\n    },\n    logout(){\n      this.num=0\n      localStorage.userid=null\n      this.$router.push(\"Index\")\n    },\n    createProduct(){\n      this.$http.get('http://localhost:8000/new/' + this.arr.name + '/' + this.arr.price  + '/' + this.arr.detail + '/' + this.img_url)\n      .then( () => this.$emitter.emit('reload',1))\n      .catch( r => console.log(r))\n\n      this.arr.name= \"\"\n      this.arr.price= 0\n      this.arr.detail= \"\"\n      this.img_url=\"\"\n    }\n  },\n  mounted(){\n    console.log(\"NAV ID=\",localStorage.userid)\n    this.$emitter.on('cartNum',()=>{\n      this.num++\n      console.log(this.num)\n    })\n  },\n};\n</script>\n\n\n<style scoped>\n.windowset{\n  margin: 0 auto;\n  max-width: 100%;\n  padding: 0 0 0 0;\n}\n.windowset1{\n  padding-right: 0 !important;\n}\n.windowset2{\n  border-radius: 0%;\n}\n</style>"]},"metadata":{},"sourceType":"module"}