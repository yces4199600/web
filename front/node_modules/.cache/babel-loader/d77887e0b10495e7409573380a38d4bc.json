{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"Card\",\n\n  data() {\n    return {\n      arr: [],\n      editedData: {\n        oldName: '',\n        newName: '',\n        img_url: '',\n        price: 0,\n        detail: ''\n      },\n      cartItems: []\n    };\n  },\n\n  computed: {\n    itemList: function () {\n      return this.arr;\n    },\n    show: function () {\n      return localStorage.userid == \"admin\";\n    }\n  },\n  components: {},\n\n  mounted() {\n    this.getData();\n    this.$emitter.on('reload', () => this.getData());\n    this.$emitter.on('keyword', key => this.searchData(key));\n  },\n\n  methods: {\n    getData() {\n      this.$http.get('http://localhost:8000/products').then(r => this.arr = r.data).catch(r => console.log(r));\n    },\n\n    searchData(key) {\n      this.$http.get('http://localhost:8000/search/' + key).then(r => {\n        if (r.data.length == 0) {\n          alert(\"查無符合項目!\");\n          this.getData();\n        } else this.arr = r.data;\n      }).catch(r => console.log(r));\n    },\n\n    plus(id) {\n      const findItems = this.cartItems.find(x => x.id === id);\n\n      if (findItems) {\n        findItems.hitTimes++;\n      } else {\n        console.log(\"not found \" + id);\n        const item = {\n          id: id,\n          hitTimes: 1\n        };\n        this.cartItems.push(item);\n      }\n\n      this.$emitter.emit('cartNum', 1);\n\n      if (this.cartItems) {\n        localStorage.cartItems = JSON.stringify(this.cartItems);\n      }\n    },\n\n    editItem(id) {\n      // TODO:\n      // 把form的資料取出後送到\n      // process.env.VUE_APP_BACKEND_URL + \"modifyFile\"\n      // 型別的部分要注意一下\n      let a = document.getElementById(\"form-\" + id).getElementsByTagName(\"input\");\n      let b = document.getElementById(\"form-\" + id).getElementsByTagName(\"textarea\");\n      this.editedData.oldName = a[0].placeholder;\n      this.editedData.newName = a[1].value; // this.editedData.img_url = a[2].value\n\n      this.editedData.price = a[2].value;\n      this.editedData.detail = b[0].value;\n      this.$http.get('http://localhost:8000/edit/' + id + '/' + this.editedData.newName + '/' + this.editedData.price + '/' + this.editedData.detail).then(() => this.getData()).catch(r => console.log(r));\n    },\n\n    deleteItem(id) {\n      // TODO:\n      // 同上但是後端還沒寫\n      this.$http.get('http://localhost:8000/del/' + id).then(() => this.getData()).catch(r => console.log(r));\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["name","data","arr","editedData","oldName","newName","img_url","price","detail","cartItems","computed","itemList","show","localStorage","userid","components","mounted","getData","$emitter","on","key","searchData","methods","$http","get","then","r","catch","console","log","length","alert","plus","id","findItems","find","x","hitTimes","item","push","emit","JSON","stringify","editItem","a","document","getElementById","getElementsByTagName","b","placeholder","value","deleteItem"],"sourceRoot":"","sources":["/Users/chengyu/Downloads/dbhw-main/front/src/components/ItemCard.vue"],"sourcesContent":["<template>\n\n<!-- TODO: -->\n<!-- 新增商品的按鈕，和彈出視窗 -->\n  <div class=\"container\">\n    <div class=\"mt-3 row\">\n      <!-- <div class=\"card col-4\">\n        <img src=\"https://f.ecimg.tw/items/DGBJCWA900BL03D/000001_1635130622.jpg\" class=\"card-img-top\" alt=\"瑪利歐派對 超級巨星\"/>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">瑪利歐派ss對 超級巨22星</h5>\n          <a class=\"id\" style=\"display: none\">14</a>\n          <p class=\"card-text\">\n            《瑪利歐派對 超級巨星》中包含從歷代《瑪利歐派對》中嚴選出來的「雙陸遊戲」以及「小遊戲」。雙陸遊戲：如「碧姬公主的生日蛋糕」和「太空樂園」等。\n          </p>\n          <a href=\"#\" class=\"btn btn-primary me-md-2\">1790</a>\n          <a href=\"modifyFile\" class=\"btn btn-danger\">修改</a>\n        </div>\n      </div> -->\n\n      <!-- 範例卡片 -->\n      <div class=\"card col-4\" v-for=\"item in itemList\" :key=\"item.id\">\n        <img :src=\"'https://' + item.img_url\" class=\"card-img-top\" alt=\"image not found\"/>\n          <div class=\"card-body\">\n          <h5 class=\"card-title\">{{ item.name }}</h5>\n          <a class=\"id\" style=\"display: none\">{{ item.id }}</a>\n          <p class=\"card-text\">{{ item.detail }}</p>\n          <button @click=\"plus(item.id)\" class=\"btn btn-primary me-md-2\">{{ item.price }}</button>\n\n          <!-- <a href=\"modifyFile\" class=\"btn btn-danger\">修改</a> -->\n\n            <!-- 按鈕開頁面 -->\n          <button type=\"button\" class=\"btn btn-danger\" data-toggle=\"modal\" :data-target=\"'#card-' + item.id\" v-if=\"show\">\n            編輯\n          </button>\n        </div>\n\n        <!-- Modal -->\n        <div class=\"modal fade\" :id=\"'card-' + item.id\" tabindex=\"-1\" role=\"dialog\">\n          <div class=\"modal-dialog modal-dialog-centered\">\n            <div class=\"modal-content\">\n              <form :id=\"'form-' + item.id\">\n                <div class=\"modal-body\">\n                    <div class=\"form-group\">\n                      <label>商品名稱</label>\n                      <input class=\"form-control\" name=\"oldName\" type=\"text\" :placeholder=\"item.name\" readonly>\n                      <input class=\"form-control\" name=\"newName\" :value=\"item.name\">\n                    </div>\n                    <!-- <div class=\"form-group\">\n                      <label for=\"exampleInputPassword1\">商品圖片</label>\n                      <input  class=\"form-control\" name=\"img_url\" :value=\"item.img_url\">\n                    </div> -->\n                    <div class=\"form-group\">\n                      <label for=\"exampleInputPassword1\">商品價錢</label>\n                      <input class=\"form-control\" name=\"price\" :value=\"item.price\">\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"exampleInputPassword1\">商品細節</label>\n                      <textarea name=\"detail\" rows=\"5\" class=\"form-control\" :value=\"item.detail\"></textarea>\n                    </div>\n                </div>\n                <div class=\"modal-footer\">\n                  <button @click=\"editItem(item.id)\" type=\"submit\" class=\"btn btn-primary\" data-dismiss=\"modal\">修改</button>\n                  <button @click=\"deleteItem(item.id)\" type=\"submit\" class=\"btn btn-danger\" data-dismiss=\"modal\" >刪除</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n\n\n</template>\n\n<script>\nexport default {\n  name: \"Card\",\n  data() {\n    return {\n      arr: [],\n      editedData: {\n        oldName: '',\n        newName: '',\n        img_url: '',\n        price: 0,\n        detail: '',\n      },\n      cartItems: [],\n    };\n  },\n  computed: {\n    itemList: function () { return this.arr },\n    show: function(){\n      return localStorage.userid==\"admin\"\n    },\n  },\n  components: {\n\n  },\n  mounted(){\n    this.getData()\n    this.$emitter.on('reload',() => this.getData())\n    this.$emitter.on('keyword',key => this.searchData(key))\n  },\n  methods: {\n    getData(){\n      this.$http.get('http://localhost:8000/products')\n        .then( r => this.arr = r.data)\n        .catch( r => console.log(r))\n    },\n    searchData(key){\n      this.$http.get('http://localhost:8000/search/' + key)\n        .then( r => {\n          if(r.data.length == 0){\n            alert(\"查無符合項目!\")\n            this.getData()\n          } \n          else this.arr = r.data\n        })\n        .catch( r => console.log(r))\n    },\n    plus(id){\n      const findItems = this.cartItems.find(x => x.id === id)\n      if(findItems){\n        findItems.hitTimes++\n      }else{\n        console.log(\"not found \" + id)\n        const item = {\n          id : id,\n          hitTimes: 1\n        }\n        this.cartItems.push(item)\n      }\n      this.$emitter.emit('cartNum',1)\n      if(this.cartItems){\n        localStorage.cartItems = JSON.stringify(this.cartItems);\n      }\n\n    },\n    editItem(id){\n      // TODO:\n      // 把form的資料取出後送到\n      // process.env.VUE_APP_BACKEND_URL + \"modifyFile\"\n      // 型別的部分要注意一下\n      let a = document.getElementById(\"form-\"+id).getElementsByTagName(\"input\")\n      let b = document.getElementById(\"form-\"+id).getElementsByTagName(\"textarea\")\n      this.editedData.oldName = a[0].placeholder\n      this.editedData.newName = a[1].value\n      // this.editedData.img_url = a[2].value\n      this.editedData.price = a[2].value\n      this.editedData.detail = b[0].value\n\n      this.$http.get('http://localhost:8000/edit/' + id +'/' + this.editedData.newName + '/'  + this.editedData.price + '/' + this.editedData.detail)\n      .then( () => this.getData())\n      .catch( r => console.log(r))\n    },\n    deleteItem(id){\n      // TODO:\n      // 同上但是後端還沒寫\n      this.$http.get('http://localhost:8000/del/' + id)\n      .then( () => this.getData())\n      .catch( r => console.log(r))\n    },\n  }\n};\n</script>\n\n<style scoped>\n.card{overflow:hidden;}\n.card img{transform:scale(1,1);transition: all 0.5s ease-out;}\n.card img:hover{transform:scale(1.1,1.1);}\n</style>\n\n"]},"metadata":{},"sourceType":"module"}